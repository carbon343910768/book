<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.bjtu.xxq.dao.BookDao">

    <resultMap id="BaseResultMap" type="edu.bjtu.xxq.model.Book">
        <result column="book_id" jdbcType="INTEGER" property="bookId"/>
        <result column="book_name" jdbcType="VARCHAR" property="bookName"/>
        <result column="book_description" jdbcType="VARCHAR" property="bookContent"/>
        <result column="book_author" jdbcType="VARCHAR" property="bookAuthor"/>
        <result column="book_publisher" jdbcType="VARCHAR" property="bookPublisher"/>
        <result column="book_published" jdbcType="DATE" property="bookPublished"/>
        <result column="book_isbn" jdbcType="VARCHAR" property="bookISBN"/>
        <result column="book_price" jdbcType="DECIMAL" property="bookPrice"/>
    </resultMap>

    <select id="findBooksByTag" resultType="edu.bjtu.xxq.model.Book">
        SELECT book.*
        FROM book,
        book_tag
        WHERE book_tag.book_id = book.book_id
        AND book_tag.tag_name = #{0}
        LIMIT #{1}, #{2}
        <!-- 多参数根据0,1,2赋值 -->
    </select>

    <select id="findBookById" resultType="edu.bjtu.xxq.model.Book">
        SELECT *
        FROM book
        WHERE book_id = #{id}
    </select>findImagesOfBook

    <select id="findBooksById" resultType="edu.bjtu.xxq.model.Book">
        SELECT *
        FROM book
        WHERE book_id IN
        <foreach collection="List" open="(" separator="," close=")" item="id">
            #{id}
        </foreach>
    </select>

    <select id="findImagesOfBook" resultType="java.lang.Integer">
        SELECT image_id
        FROM book_image
        WHERE book_id = #{id}
    </select>

    <select id="findBookByName" resultType="edu.bjtu.xxq.model.Book">
        SELECT *
        FROM book
        WHERE book_name LIKE #{name}
    </select>

</mapper>